---
import { getCollection } from "astro:content";
import { siteConfig } from "../../config";
import "../../styles/global.css";

const allPosts = await getCollection("blog");
const videojuegos = allPosts
  .filter((p) => p.data.category === "videojuegos")
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
const cine = allPosts
  .filter((p) => p.data.category === "cine")
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <title>Cr√≠ticas ‚Äî {siteConfig.name}</title>
  </head>
  <body class="bg-black text-white antialiased">

    <!-- Nav -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-black/80 backdrop-blur-sm border-b border-white/5">
      <div class="container mx-auto px-8 py-4 flex items-center justify-between">
        <a href="/" class="text-white font-bold tracking-tight">JN</a>
        <div class="flex items-center gap-8">
          <a href="/" class="text-white/60 hover:text-white transition-colors text-sm tracking-wide">Inicio</a>
          <a href="/blog" class="text-white text-sm tracking-wide">Cr√≠ticas</a>
        </div>
      </div>
    </nav>

    <main class="pt-24 pb-16">
      <div class="container mx-auto px-8 max-w-4xl">

        <div class="text-center mb-16">
          <p class="text-white/40 text-sm tracking-[0.3em] uppercase mb-4">Opini√≥n</p>
          <h1 class="text-4xl lg:text-6xl font-bold text-white tracking-tight">CR√çTICAS</h1>
        </div>

        <!-- Videojuegos -->
        <section class="mb-20">
          <h2 class="text-2xl font-bold text-white mb-8 flex items-center gap-4">
            <span class="text-2xl">üéÆ</span>
            Videojuegos
          </h2>
          {videojuegos.length > 0 ? (
            <div class="space-y-6">
              {videojuegos.map((post) => (
                <a href={`/blog/${post.id}`} class="group block bg-neutral-900 rounded-lg p-6 hover:bg-neutral-800 transition-colors">
                  <p class="text-white/40 text-xs uppercase tracking-wider mb-2">
                    {post.data.pubDate.toLocaleDateString("es-PE", { year: "numeric", month: "long", day: "numeric" })}
                  </p>
                  <h3 class="text-xl font-bold text-white group-hover:text-white/80 transition-colors mb-2">{post.data.title}</h3>
                  <p class="text-white/60 text-sm">{post.data.description}</p>
                </a>
              ))}
            </div>
          ) : (
            <p class="text-white/40">Pr√≥ximamente</p>
          )}
        </section>

        <!-- Cine -->
        <section>
          <h2 class="text-2xl font-bold text-white mb-8 flex items-center gap-4">
            <span class="text-2xl">üé¨</span>
            Cine
          </h2>
          {cine.length > 0 ? (
            <div class="space-y-6">
              {cine.map((post) => (
                <a href={`/blog/${post.id}`} class="group block bg-neutral-900 rounded-lg p-6 hover:bg-neutral-800 transition-colors">
                  <p class="text-white/40 text-xs uppercase tracking-wider mb-2">
                    {post.data.pubDate.toLocaleDateString("es-PE", { year: "numeric", month: "long", day: "numeric" })}
                  </p>
                  <h3 class="text-xl font-bold text-white group-hover:text-white/80 transition-colors mb-2">{post.data.title}</h3>
                  <p class="text-white/60 text-sm">{post.data.description}</p>
                </a>
              ))}
            </div>
          ) : (
            <p class="text-white/40">Pr√≥ximamente</p>
          )}
        </section>

      </div>
    </main>

    <footer class="bg-black border-t border-white/5 py-8">
      <div class="container mx-auto px-8 text-center">
        <p class="text-white/30 text-sm">¬© {new Date().getFullYear()} {siteConfig.name}</p>
      </div>
    </footer>
  </body>
</html>
